
{{- $page_component := . -}}
{{- $typographyData := site.Data.design.typographies -}}
{{- $objectData := site.Data.design.objects -}}
{{- $buttonData := site.Data.design.buttons -}}
{{- $design := dict -}}

{{- range $objectData -}}
  {{- range $key, $value := . -}}

    {{/* Set override */}}

    {{- if $page_component.Params.design -}}
      {{- $override := index $page_component.Params.design $key -}}
      {{- $default := $value -}}
      {{- $value = $override | default $default }}
    {{- end -}}

    {{- if in $key "size" -}} {{- $value = printf "text-%s" $value -}}
    {{- else if in $key "margin" -}} {{- $value = printf "my-%s" (string $value) -}}
    {{- else if in $key "space" -}} {{- $value = printf "py-%s" (string $value) -}}
    {{- else if in $key "bg" -}} {{- $value = printf "bg-%s" $value -}}
    {{- else if in $key "text" -}} {{- $value = printf "text-%s" $value -}}
    {{- else if eq $key "rounded" -}} {{- $value = printf "rounded-%s" $value -}}
    {{- else if eq $key "shadow" -}} {{- $value = printf "shadow-%s" $value -}}
    {{- else if eq $key "border" -}} {{- $value = printf "border-%s" (string $value) -}}
    {{- end -}}

    {{- $design = merge $design (dict $key $value) -}}

  {{- end -}}
{{- end -}}

{{ range $typographyData -}}
  {{- $name := .name -}}
  {{- $type := "" -}}
  {{- range $key, $value := . -}}
    {{/* Set override */}}
    {{- if $page_component.Params.design.typography -}}
      {{- $override := index $page_component.Params.design.typography (printf "%s_%s" $name $key) -}}
      {{- $default := $value -}}
      {{- $value = string ($override | default $default) -}}
    {{- end -}}

    {{- if eq $key "size" -}} {{- $value = (printf "text-%s" $value ) -}} {{- end -}}
    {{- if eq $key "font" -}} {{- $value = (printf "font-%s" $value ) -}} {{- end -}}
    {{- if eq $key "space" -}} {{- $value = (printf "py-%s"  $value ) -}} {{- end -}}
    {{- if eq $key "bg_color" -}} {{- $value = (printf "bg-%s"  $value ) -}} {{- end -}}
    {{- if eq $key "color" -}} {{- $value = (printf "text-%s"  $value ) -}} {{- end -}}

    {{- $type = printf "%s %s" $type $value -}}
  {{- end -}}
  {{- $design = merge $design (dict .name $type ) -}}
{{- end -}}

{{- range $buttonData -}}
  {{- $name := .name -}}
  {{- $button := "" -}}
  {{- range $key, $value := . -}}
    {{/* Set override */}}
    {{- if $page_component.Params.design.buttons -}}
      {{- $override := index $page_component.Params.design.buttons (printf "%s_%s" $name $key) -}}
      {{- $default := $value -}}
      {{- $value = $override | default $default -}}
    {{- end -}}

        {{- if in $key "space" -}} {{- $value = printf "px-%s py-%s" (string (mul $value 4)) (string $value)  -}} {{- end -}}
        {{- if in $key "font" -}} {{- $value = printf "font-%s"  $value  -}} {{- end -}}
        {{- if in $key "size" -}} {{- $value = printf "text-%s"  (string $value ) -}} {{- end -}}
        {{- if in $key "rounded" -}} {{- $value = printf "rounded-%s"  $value  -}} {{- end -}}
        {{- if eq $key "color" -}} {{- $value = printf "bg-%s"  $value  -}} {{- end -}}
        {{- if in $key "text" -}} {{- $value = printf "text-%s"  $value  -}} {{- end -}}

        {{- if eq $key "name" -}} {{- $name = printf "button_%s"  $value  -}} {{- end -}}

      {{- $button = printf "%s %s" $button $value -}}
    {{- end -}}
    {{- $design = merge $design (dict $name $button ) -}}
{{- end -}}

{{- return $design -}}
